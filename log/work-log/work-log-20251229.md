# 開発記録 - 2025/12/29

## プロジェクト概要
カスタムリソースプランナー（Custom Resource Planner）プロジェクトの初期セットアップを実施。Nuxt 3フレームワークを使用したWebアプリケーションの基盤構築を行った。

## 実施した作業

### 1. Nuxt 3プロジェクトの初期セットアップ
- **package.json**の作成
  - プロジェクト名: `shopping-list`
  - Nuxt 3.13.0の導入
  - @nuxt/devtoolsの追加
  - 開発サーバー起動スクリプトの設定（`npm run dev`）

- **nuxt.config.ts**の設定
  - 開発サーバーのホスト設定（0.0.0.0）とポート設定（3000）
  - Viteのwatchオプション設定（usePolling: true）でDocker環境でのファイル監視を最適化

- **tsconfig.json**の設定
  - TypeScript設定ファイルを作成
  - Nuxtの自動生成される型定義ファイルへの参照を設定

### 2. メインアプリケーションファイルの作成
- **app.vue**の実装
  - カウンター機能: カウントアップボタンと現在の数字表示
  - 数値保存機能: 入力された数値をAPI経由で保存
  - エラーハンドリングとユーザーフィードバック機能
  - 保存中の状態表示（送信中...）
  - 成功/エラーメッセージの表示機能

### 3. APIエンドポイントの実装
- **server/api/save.ts**の作成
  - POSTリクエストで数値を受け取るAPIエンドポイント
  - 数値のバリデーション実装
  - データをJSONファイル（`data/numbers.json`）に保存
  - 既存データの読み込みと新しいデータの追記機能
  - タイムスタンプ付きでデータ保存
  - エラーハンドリング（400, 405, 500エラー）

### 4. Docker環境の構築
- **Dockerfile**の作成
  - Node.js 20-slimをベースイメージに使用
  - 作業ディレクトリを/appに設定
  - 依存関係のインストール
  - ポート3000を公開
  - 開発サーバー起動コマンドの設定

- **docker-compose.yml**の作成
  - アプリケーションサービス（app）の定義
    - ポート3000:3000でマッピング
    - ボリュームマウントでホットリロード対応
    - 環境変数でDB接続情報を設定
  - MySQLサービス（mysql）の定義
    - MySQL 8.0を使用
    - ポート3306:3306でマッピング
    - データベース: `shopping_list`
    - ユーザー: `app_user`
    - 初期化SQLファイルのマウント設定

### 5. データベース設定
- **mysql.sql**の作成
  - `shopping_list`データベースの使用設定
  - `app_user`ユーザーの作成と権限付与
  - `number`テーブルの作成
    - id (AUTO_INCREMENT PRIMARY KEY)
    - value (INT NOT NULL)
    - created_at (TIMESTAMP)
    - updated_at (TIMESTAMP)
  - InnoDBエンジンとutf8mb4文字セットを使用

### 6. その他の設定ファイル
- **.gitignore**の作成
- **public/favicon.ico**と**public/robots.txt**の追加
- **README.md**の追加（Nuxt標準のREADME）

### 7. 動作確認
- データ保存機能のテスト実施
  - `data/numbers.json`に実際のデータが保存されることを確認
  - タイムスタンプ付きでデータが正しく保存されることを確認
  - 複数のデータ保存が正常に動作することを確認

## 作成されたファイル一覧

### プロジェクト設定ファイル
- `package.json`
- `package-lock.json`
- `nuxt.config.ts`
- `tsconfig.json`
- `.gitignore`
- `README.md`

### アプリケーションファイル
- `app.vue` (メインアプリケーション)
- `server/api/save.ts` (APIエンドポイント)

### Docker関連
- `Dockerfile`
- `docker-compose.yml`

### データベース
- `mysql.sql` (初期化SQL)

### データファイル
- `data/numbers.json` (保存された数値データ)

### 公開ファイル
- `public/favicon.ico`
- `public/robots.txt`

## 技術スタック
- **フレームワーク**: Nuxt 3.13.0
- **言語**: TypeScript, Vue 3
- **ランタイム**: Node.js 20
- **データベース**: MySQL 8.0
- **コンテナ**: Docker, Docker Compose

## 次回以降の予定
- データベースへの保存機能の実装（現在はJSONファイル保存）
- リソースプランナー機能の本格的な実装
- UI/UXの改善

